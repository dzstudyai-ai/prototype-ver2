-- Add student_group column to users table
ALTER TABLE users ADD COLUMN IF NOT EXISTS student_group text DEFAULT NULL;

-- Populate groups using LAST 8 DIGITS of student_id (suffix matching)
-- Because users register with 2024XXXXXXXX but CSV has 2424/2324/2224 prefixes

-- Group A1: students 1-37
UPDATE users SET student_group = 'A1' WHERE RIGHT(student_id, 8) IN (
    '31545108','31564710','31447710','31447806','31545419',
    '37543802','36197902','33212814','32181109','32443607',
    '31360714','31666515','31688411','31757009','32236910',
    '32573917','31238005','35399712','32582318','32132415',
    '36136204','36028217','38479406','31723513','33061720',
    '31680416','31622205','33250512','31047211','31462201',
    '32466211','31714606','32487106','32150608','31271804',
    '32557305','31485807'
);

-- Group A2: students 38-73
UPDATE users SET student_group = 'A2' WHERE RIGHT(student_id, 8) IN (
    '31414415','31476307','31689513','34018611','32150612',
    '31138115','32147611','35455304','33424920','32150318',
    '31689520','35514519','31128907','36421806','36374906',
    '31454213','31243410','32031104','31621017','31461706',
    '39558901','31689720','33054905','31689615','36176802',
    '32150717','31211201','31423701','31035804','37589418',
    '35214402','31281912','33372103','32438101','31142801',
    '36054716'
);

-- Group A3: students 74-111
UPDATE users SET student_group = 'A3' WHERE RIGHT(student_id, 8) IN (
    '31069010','31063211','35111213','31271418','31621011',
    '37439404','31285517','31122602','38006419','31039111',
    '35382908','34244008','31624111','33185602','39491402',
    '35558904','33011410','31461904','31597805','37139207',
    '31621911','35579812','31617802','36241818','31453410',
    '31142903','39048618','32049603','39043710','31621219',
    '31620320','38572814','32042406','32225016','31222914',
    '35570418','33293509','35558708'
);

-- Group A4: students 112-147
UPDATE users SET student_group = 'A4' WHERE RIGHT(student_id, 8) IN (
    '34020006','39006404','31114405','31441705','37256403',
    '31483704','31486918','32231017','31211310','39492503',
    '36015307','35031908','34564517','35379612','38436004',
    '35455601','31209901','31209206','37395513','36015401',
    '34398614','31068911','32485803','31211102','36274915',
    '31398703','31414605','31858719','33153202','31475705',
    '31598508','32562607','31390901','35426902','34244806',
    '37233412'
);
